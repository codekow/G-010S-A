1,3d0
< a0_image=3FE46542AAAA_a0.bin
< a2_iaddr=0xFE0000
< a2_image=3FE46542AAAA_a2.bin
6,8c3,5
< addmisc=setenv bootargs ${bootargs} ethaddr=${ethaddr} machtype=${machtype}  vpe1_load_addr=0x83f00000 vpe1_mem=1M mem=63M ${mtdparts} quiet
< addmtdparts0=setenv mtdparts mtdparts=sflash:256k(uboot)ro,512k(uboot_env),6144k(linux),6144k(image1),1024k(configfs),2112k(logfs),64k(ri),64k(sfp),64k(ribackup)
< addmtdparts1=setenv mtdparts mtdparts=sflash:256k(uboot)ro,512k(uboot_env),6144k(image0),6144k(linux),1024k(configfs),2112k(logfs),64k(ri),64k(sfp),64k(ribackup)
---
> addmisc=setenv bootargs ${bootargs} ethaddr=${ethaddr} machtype=${machtype} ignore_loglevel vpe1_load_addr=0x83f00000 vpe1_mem=1M mem=63M ${mtdparts}
> addmtdparts0=setenv mtdparts mtdparts=sflash:256k(uboot)ro,512k(uboot_env),7424k(linux),8192k(image1)
> addmtdparts1=setenv mtdparts mtdparts=sflash:256k(uboot)ro,512k(uboot_env),7424k(image0),8192k(linux)
11c8
< boot_fail=0
---
> bertEnable=0
16d12
< bootargs=rootfstype=squashfs,jffs2 ip=192.168.1.10:192.168.1.100:192.168.2.1::::off ethaddr=ac:9a:96:00:00:00 machtype=SFP vpe1_load_addr=0x83f00000 vpe1_mem=1M mem=63M mtdparts=sflash:256k(uboot)ro,512k(uboot_env),6144k(linux),6144k(image1),1024k(configfs),2112k(logfs),64k(ri),64k(sfp),64k(ribackup) quiet
19,22c15
< bootretry=-1
< c_img=0
< commit=0
< config_iaddr=0xCC0000
---
> committed_image=0
25,26c18,19
< ethact=SERDES
< ethaddr=ac:9a:96:00:00:00
---
> ethact=SGMII
> ethaddr=00:06:B5:06:8C:7B
27a21,22
> fileaddr=80F00000
> filesize=400092
31,32c26,28
< goi_calibrated=1
< goi_config=begin-base64 644 goi_config@H4sIAP0BAAACA+1Y3U/bQAzv6/pX3MRDnwjn+0wW7YHxJTQ2EO3KA0LRNU0h@WtNUSWDsv5+PtiNNUzaNrdpY/BLXPttnX34+p1ER7qTTIg53rtM4KMxgHAVj@k0dZkEWjYICcE+Z3rWcRRVJCPDyRqk8KSn/nBWctCppJ2SK0tQG6zQuTEdI6@/dj71D04X7suS9Oi9fJoi+ynZJIWJLwxk+uIFDcR6X2dRiQeRpMiHsVR9tr3@/baVvT3ZxQoF5weHVrJFelEyJZfvr3xyXNyQy9td5LoHyFzsJJY36O8yv2pz@qn3peIL7rnCYJ33abjX0d1D0FP6fD/1fxL9iijf4/8fwnzT4fxn4vzPTYTAY@/ib0/wT+S7zQFv9SU93gfzP4Hy7h3+J8jvb+7tl+8G5/gXSf9PFKIJd9BDSA@L5gjWAPkl4V/7Nh/IIbFtcaBfh3+sQO0gGkEPTAqOeKfA44BDf43QLSBwH+P@/zCdjOLrhwYwYzeLf8aVeuwFHCz+dfP9vxlqz06c4OGTzvU4HZhxp/3K3gjp@hOyZcTzIjOV7cRJhpXDg7zAKepu628ztAX1DwSd5mMXTgvS1oxzhk9O93RP7@QzqoO7yYsbzTXoqV2XEjrwgLnDMiDHibRbNZtLpgGA7DAMfTqh16y5O4KKJs@jSaYpl+scpHaGQSUdDh3dUlGrQw0rfhI0klcpCXjDzgYlWoTnJ1YX0/pYUnf@i82RiedyqJPTNXL2gzioZ4/6/dCMcWaj8w1COdm5DuY6qqHWDh7sRK2d1VFB@a+1wI3iLe7V2Vgde2a60SeYuy+cbZNRbTvy+mCscpYFJjwnB5OOK4yQd2n8w@Z05dBxTXAjcr2GpYsO7palh7OKzsdBHWJu5oBoq6WjIP6sJap+BIj3pMSlXN@al4i7nqrYe0ZMtCrYR/q5ihwlUs9V+i6sHYNdbQnhWLaBVF9lSOTI7gS/LYv@vV45no39v4d0qCOpy5WnmFBQyvy82z0OQHh0aLLPi6XYrT2QkmkusGHXLC77@pcrFl4VzoRSHmrVTk5lBOo7DhQFID4uLxZMMKlmkyW1FMkhzUxGNwjx+jHPU@76LT+5GSthE1935DDTXU0Deb1xqAABwAAA==@====@
---
> goi_config=begin-base64 644 goi_config@H4sIAMDnNFQCA+1WTW+bQBD1tf4VW/Xgk8nOfgFFPVhJWkV11Ci20oMVIQxr@B9V4EeA2/fcdTBzbGCeXNFVU3gFWM8O8nVlmZ3QRnoRmOYvnJ3MT+9Wy87Kg@CFvK9RtRfzPJaAeYAAmKK6U6FDguOoR2XgGrvAgyQjqZMcVTds/p3yi61YkT@PHzSmy/MNFj0uu9MWsRmSU6DRTzNgnI9jhONmUpS0mMU7D51+2CPKf8I9Ma2@lCW+nQ6GypIW7XX3fGbBcq7zmrDQSarR8SrTfhFMF6XBhnSc6RnpcVCWK5nr@MGnzrfJmcHXmTyO/snEsAODMASZrBFEYhX6QRnVe3E2exEWhsyMaPzW/DpSJ@WcaFybbbuMRd7CTHvxpS3M5TenhGz/b0Z2GwwBBp5RhLwynzWtPCEa2ZzXJd@VMo+uA1f0mpDTDB6xG+T9tEvKvvsmF+2/hKO+G3SPvpFZV/sx7JNghL74ofo@gTG2l9f7TeTUchwqOQjGqLC3NheJifD7h+Qxy3EVs5ltqwbedRoOeVGsHPuQ@Fta0NnU5bgupqWiiRSvglpKuQxkoqQ5pMRECDmnLf4TCIS1b03LucI5RKCVY@Ey1aKUvZ4HK8aZG8/o/rIMdyTPSy2KnFHI+uKjZqSaYUCMFsqXZivx6NLnwQ@Lo2C7MfGtLzweXnQji0bTHe9AriYKwdc6TRYpkEWTM0iDjfmnFMHBD7BZrUI@TLKqSaYmD7ZOh8aklybSeKY1u1mYx1u7LzcjZLrniKZbJTSZbpJHUXltvLX7@X2P/L+MO1+0/mOu/wPFM/0cA9n9JJQ4AQNEO8B8Tbf9/DdBOi/8Z+/W/nsX8@RZDrrLxwrTD/+UL1r4Q4Wv/YBLfzvyjrH/sMa+v/NfAB5y+yNAUJ78pBnRR3@mox/p5rEEU4C8SzW2XvP87ql7NNwMDq/9q/PP5eSD2SMUzyZfL31Loo7MkkG@t97onExW30/KJbYSMslvuziAedJyJPWAC0tw5tFuW3YtWrRo8c/xB1S28VAA@FAAA@====@
> gphy0_phyaddr=0
> gphy1_phyaddr=1
34a31
> image0_version=3FE56853AOPD39
36,39c33,35
< image1_is_valid=1
< image_name=g010sa
< import_uboot_env=env import -t ${ram_addr} ${filesize}
< ipaddr=192.168.1.10
---
> image1_is_valid=0
> image_name=openwrt-lantiq-falcon-SFP
> ipaddr=192.168.2.10
43,48c39,41
< kernel1_offs=0x6C0000
< load_kernel=tftpboot ${ram_addr} ${tftppath}${image_name}-uImage
< load_uboot=tftpboot ${ram_addr} ${tftppath}u-boot.img
< load_uboot_env=tftp ${ram_addr} ${tftppath}u-boot.env
< load_uboot_env_y=loady ${ram_addr}
< log_iaddr=0xDC0000
---
> kernel1_offs=0x800000
> load_kernel=tftp ${ram_addr} ${tftppath}${image_name}-uImage
> load_uboot=tftp ${ram_addr} ${tftppath}u-boot.img
53c46
< mtdparts=mtdparts=sflash:256k(uboot)ro,512k(uboot_env),6144k(linux),6144k(image1),1024k(configfs),2112k(logfs),64k(ri),64k(sfp),64k(ribackup)
---
> nSerial=ALCLFAB759C8
55,56c48
< netconsole=set stderr nulldev;set stdin nc,serial;set stdout nc,serial
< next_active=0
---
> netmask=255.255.255.0
58a51,53
> omci_loid=loid
> omci_lpwd=lpasswd
> preboot=gpio intput 2;gpio input 105;gpio input 106;gpio input 107;gpio input 108;gpio set 3
60,63c55
< reset_uboot_env=env default -f -a; saveenv
< ri_hiaddr=0xFD0000
< ri_image=3FE46542AAAA_ri.bin
< ri_siaddr=0xFF0000
---
> reset_uboot_env=sf probe 0;sf erase 40000 80000
65,67c57,59
< select_image=if test -n $commit  ; then else setenv commit  _err;saveenv;fi;if test -n $image0_is_valid ; then else setenv image0_is_valid 1;saveenv;fi;if test -n $image1_is_valid ; then else setenv image1_is_valid 0;saveenv;fi;if itest *${magic_addr} == ${magic_val} ; then if itest *${act_img_addr} == 0 ; then setenv next_active 0;fi;if itest *${act_img_addr} == 1 ; then setenv next_active 1;fi;mw ${magic_addr} 0x0;mw ${act_img_addr} 0x0;fi;if test $next_active = -1 ; then setenv c_img $commit;else setenv c_img $next_active;if test $next_active != $commit ;then if test $next_active = 0 ;then setenv next_active 1;setenv image0_is_valid 0;setenv commit 1;else setenv next_active 0;setenv image1_is_valid 0;setenv commit 0;fi;saveenv;fi;fi;exit 0
< serverip=192.168.1.100
< start_netconsole=if test -n ${ncip}; then echo 'check for netconsole'; if ping ${ncip}; then run netconsole; echo 'netconsole enabled'; fi; fi
---
> select_image=setenv activate_image -1;if itest *${magic_addr} == ${magic_val} ; then if itest *${act_img_addr} == 0 ; then setenv activate_image 0;fi;if itest *${act_img_addr} == 1 ; then setenv activate_image 1;fi;mw ${magic_addr} 0x0;mw ${act_img_addr} 0x0;fi;if test $activate_image = -1 ; then setenv c_img $committed_image;else setenv c_img $activate_image;setenv activate_image -1;fi;if test $c_img = 0 && test $image0_is_valid = 0 ; then setenv c_img 1;fi;if test $c_img = 1 && test $image1_is_valid = 0 ; then setenv c_img 0;fi;if test $image0_is_valid = 0 && test $image1_is_valid = 0 ; then setenv c_img _err;fi;exit 0
> serverip=192.168.2.100
> sfp_a2_info=begin-base64 644 sfp_a2_info @ZADOAF8A2ACMoHUwiLh5GK/IAACIuAAAe4Yi0G4XJxAHywAPBjAAFAAGtQaM@ewAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/gAAAAAAAAAEAAAABAAAAAQAAAAEA@AAAAAABzLVh/2hJ2P9cAAP////8DAABA//8AQAAAcAAAAAAAIAAAAAAAAAAA@AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA@AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA@AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEFBMQAAAAAAAAAAAAAAAAAA@AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA@AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA@AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA@====@
71,79c63,66
< update_A0=gpio clear 102;tftpboot ${ram_addr} ${tftppath}${a0_image};eeprom write 50 ${ram_addr} 0 ${filesize}
< update_A2=tftpboot ${ram_addr} ${tftppath}${a2_image};sf probe 0;sf erase ${a2_iaddr} +${filesize};sf write ${ram_addr} ${a2_iaddr} ${filesize}
< update_configfs=tftpboot ${ram_addr} ${tftppath}configfs.image;sf probe 0;sf erase ${config_iaddr} +${filesize};sf write ${ram_addr} ${config_iaddr} ${filesize}
< update_image0=tftpboot ${ram_addr} ${tftppath}${image_name}-squashfs.image;sf probe 0;sf erase ${kernel0_offs} +${filesize};sf write ${ram_addr} ${kernel0_offs} ${filesize}
< update_image1=tftpboot ${ram_addr} ${tftppath}${image_name}-squashfs.image;sf probe 0;sf erase ${kernel1_offs} +${filesize};sf write ${ram_addr} ${kernel1_offs} ${filesize}
< update_logfs=tftpboot ${ram_addr} ${tftppath}logfs.image;sf probe 0;sf erase ${log_iaddr} +${filesize};sf write ${ram_addr} ${log_iaddr} ${filesize}
< update_openwrt=run update_system
< update_ri=tftpboot ${ram_addr} ${tftppath}${ri_image};sf probe 0;sf erase ${ri_hiaddr} +${filesize};sf write ${ram_addr} ${ri_hiaddr} ${filesize};sf erase ${ri_siaddr} +${filesize};sf write ${ram_addr} ${ri_siaddr} ${filesize}
< update_system=run update_image0 && setenv commit 0 && setenv image0_is_valid 1 && saveenv
---
> tx_fault_pin=255
> update_image0=tftp ${ram_addr} ${tftppath}${image_name}-squashfs.image;sf probe 0;sf erase ${kernel0_offs} +${filesize};sf write ${ram_addr} ${kernel0_offs} ${filesize}
> update_image1=tftp ${ram_addr} ${tftppath}${image_name}-squashfs.image;sf probe 0;sf erase ${kernel1_offs} +${filesize};sf write ${ram_addr} ${kernel1_offs} ${filesize}
> update_openwrt=run update_image0 && setenv committed_image 0 && setenv image0_is_valid 1 && saveenv
81,84c68
< update_uboot_env=run load_uboot_env && run import_uboot_env && saveenv
< update_uboot_env_y=run load_uboot_env_y && run import_uboot_env && saveenv
< update_uboot_y=loady ${ram_addr} && run save_uboot
< ver=U-Boot 2015.04-lantiq-gpon-1.3.6.1 (Jul 11 2017 - 12:55:33)
---
> ver=U-Boot 2011.12-lantiq-gpon-1.2.24 (Nov 03 2014 - 22:46:28)
